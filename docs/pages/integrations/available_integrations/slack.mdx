# Slack

## Create a Slack bot and connect to Admyral

1. Go to the [Your Apps](https://api.slack.com/apps) page and click **Create an App** button.

2. Click on **From Scratch**.

<img src="/slack1.png" />

3. Enter your App Name. For example, enter **Admyral**.

4. Select your workspace.

5. Click **Create App**.

<img src="/slack2.png" />

6. Go to **OAuth & Permissions**

<img src="/slack3.png" />

7. scroll down to **Scopes** and add the following scopes:

**Bot Token Scopes**

```
- chat:write
```

**User Token Scopes**

```
...
```

8. In the sidepanel, go to **Install App** and click **Install to Workspace**.

<img src="/slack4.png" />

9. Click **Allow**.

10. Copy the **Bot User OAuth Access Token**.

<img src="/slack5.png" />

11. Go to the **Settings** page in **Admyral** and click **Create New Credential**. Select **Slack**.

<img src="/slack6.png" />

12. Paste the **Bot User OAuth Access Token** in the **API Key** field and hit **Save Credential**.

<img src="/slack7.png" />

13. To communicate with existing Slack channels, you need to invite the bot to the channel. Go to the channel and type `/invite @<your app name>` (e.g. `/invite @Admyral`). Alternatively, you can add the scope `chat:write.public` to the **Bot Token Scopes**.

14. You can now use the Slack APIs in Admyral.

## Slack APIs

The following APIs are available for Slack. If you need any additional Slack API, please reach out to us on [Discord](https://discord.com/invite/GqbJZT9Hbf).

### Send a message

Send a message to a channel, user, or group. For the Slack's documentation, see [chat.postMessage](https://api.slack.com/methods/chat.postMessage).

**Parameters:**

| Field                      | Description                                                                                                                                                                                                                                                                           | Required |
| -------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :------: |
| **Channel / Group / User** | Channel, private group, or user to send a message to. For channels, you can use the name (e.g. `#my-channel`) or the ID. For private channels and groups, use the ID. For DMs to users, use the user ID.                                                                              |   Yes    |
| **Text**                   | The purpose of this field changes depends on whether the blocks field is used. If blocks is used, this is used as a fallback string to display in notifications. If blocks is not used, this is the main body text of the message. It can be formatted as plain text, or with mrkdwn. |   Yes    |
| **Blocks**                 | A JSON-based array of structured blocks (Example: `[{"type": "section", "text": {"type": "plain_text", "text": "Hello world"}}]`). See [here](https://api.slack.com/block-kit/building) for more information about blocks.                                                            |    -     |
| **Thread Timestamp**       | To reply to another message, provide the "ts" value of the message to reply to. Avoid using a reply\'s "ts" value. Instead, use the "ts" value of the parent message.                                                                                                                 |    -     |

Tip: Slack offers an online [Block Kit Builder](https://app.slack.com/block-kit-builder) to help you create blocks for your messages more easily.
